---
title: "exploratory_data_analysis"
output: pdf_document
date: "2024-04-18"
author: "Linh Vu & Duc Nguyen"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Before you build any models, you should perform appropriate exploratory (or descriptive) analysis. This might include:

Descriptive statistics for all variables you intend to investigate. For quantitative variables, this includes: mean, standard deviation, 5-number summaries, and histograms and/or boxplots; and for categorical variables, this includes: a list of all factor levels, as well as counts and proportions within each level, and bar charts.

Exploration of the relationships between variables, both numerically and graphically. Consider not only the relationship between the response and explanatory variables, but also between two (or more) explanatory variables.

You should not focus on building statistical models at this stage.

```{r}
library(readr)
student_data <- read_csv('https://archive.ics.uci.edu/static/public/697/data.csv')
```

# Data wrangling #

Data wrangling, including joining two or more data sets into a single set, converting quantitative variables to categorical or collapsing categorical variables to ones with fewer levels, renaming variables and/or variable levels, creating new variables from existing ones

First, let's check to see if there are any missing values appear in the data. 

```{r}
missing_values <- sapply(student_data, function(x) sum(is.na(x)))
missing_values
```
We can see that there is no missing value in this data. 

Let's continue looking at the structure of this data: 

```{r}
str(student_data)
```

We can see that many variables like `Marital status`, `Displaced`, `Daytime.evening.attendance`, `Educational.special.needs` are coded numerically but likely represent categories. We will convert these into categorical variables for easier analysis and interpretation.

```{r}
student_data <- mutate(student_data, `Marital Status` = as.factor(`Marital Status`))
student_data <- mutate(student_data, `Displaced` = as.factor(`Displaced`))
student_data <- mutate(student_data, `Daytime/evening attendance` = as.factor(`Daytime/evening attendance`))
student_data <- mutate(student_data, `Educational special needs` = as.factor(`Educational special needs`))
student_data <- mutate(student_data, `Tuition fees up to date` = as.factor(`Tuition fees up to date`))
student_data <- mutate(student_data, `Gender` = as.factor(`Gender`))
student_data <- mutate(student_data, `Scholarship holder` = as.factor(`Scholarship holder`))
str(student_data)
```

After that, we check the name of the variables, to see if there is any name containing special characters or unclear description to avoid potential issues in our analysis. None of the names contain special characters, but the `Course` variable seems unclear, and `Nacionality` is written in a non-Engish language. We decide to rename `Course` to `Course_Enrolled` and `Nacionality` to `Nationality`.

```{r}
names(student_data)[names(student_data) == "Course"] <- "Course_Enrolled"
names(student_data)[names(student_data) == "Nacionality"] <- "Nationality"
```

Next, we notice there are several variable with too many levels which could be simplified such as `Mother's Opccupation` and `Mother's Qualification`. Since these variables might have a strong association with our response variable, we will collapse many levels into some broader levels. 

```{r}
library(dplyr)
library(forcats)

# Assuming data is already loaded and the column is read as a factor
student_data <- mutate(student_data, `Mother's qualification` = as.factor(`Mother's qualification`))

# Collapse the levels into broader categories
student_data <- student_data %>%
  mutate(`Mother's qualification` = fct_collapse(`Mother's qualification`,
    Basic_Education = c("19", "26", "27", "37", "38"),
    Secondary_Education = c("1", "9", "12", "14", "18", "29", "30"),
    Higher_Education = c("2", "3", "4", "5", "6", "40", "41", "42", "43", "44"),
    Professional_Technical = c("22", "39"),
    Unknown_None = c("34", "35", "36")
  ))
```
```{r}
str(student_data)

```


